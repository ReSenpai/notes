## Создание бота Telegram на Node.js

### Регистрация бота

1. В самом телеграме ищем главного бота, его имя BotFather.
2. Начинаем с ним работу или пишем ```/start```
3. Далее пишем ```/newbot```.
4. У нас спрашивают имя бота, называем его как душе угодно.
5. Затем у нас спросят username бота, называем как хотим, но он обязательно должен оканчиватся на ```bot```.
6. После этого нам должны прислать токен бота, сохраняем его.


### Установка фреймворка для node.js

Для создания бота на ноде нам потребуется данный [фреймворк](https://github.com/yagop/node-telegram-bot-api).

1. Создаем папку проекта, заходи в нее через терминал и пишем ```npm init```, прожимаем везде Enter.
2. Затем устанавливаем фреймворк через ```npm install --save node-telegram-bot-api```.

3. Подключаем фреймворк в файлике index.js:

```javascript
const TelegramBot = require('node-telegram-bot-api');
```

### Создание простого бота

Бот создаётся, как новый экземпляр класа ```TelegramBot```. В конструктор данного класа мы передаем несколько параметров:
1. Первым параметром идет токен бота
2. Вторым параметром передается объект с полем ```{ polling: true }```

Далее мы создадим посто функционал бота:
* Метод ```bot.on()``` отвечает за прослушку событий. В данном случае мы поставим на прослушку сообщения, используя параметр ```'message'```.
* Вторым параметром функции идет специальный callback, который будет выполнен в случае, если пользователь отправит сообщение боту, и на вход данный callback будет принимать объект ```msg```: ```, (msg) => {console.log(msg)} ```


```javascript
const TOKEN = 'сюда кладем токен'

const bot = new TelegramBot(TOKEN, {
    polling: true
})

bot.on('message', (msg) => {
    console.log(msg) // Можно посмотреть на объект
    bot.sendMessage(msg.chat.id, 'Hello, ' + msg.from.first_name)
})

```

Теперь находим нашего бота в телегераме. Можно написать BotFather : ```/mybots``` и выбрать нужного бота.

Метод ```sendMessage()``` отправляет сообщение в ответ. Он принимает 2 параметра.
1. Мы отправляем чат id , который находится в ```msg.chat.id```.
2. Вторым параметром мы отправляет строку ответного сообщения, например ```'Hello!'```.




[Вернутся назад](../README.md)